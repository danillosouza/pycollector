# File: conf.yaml
# Description: This file is read by pycollector to
#              configure readers/writers.
#              This file is supposed to be divided
#              in two sections: specs, conf
#
# specs: map names to specific configurations
#        Everything defined inside a spec is replaced where
#        it is being used (see conf section).
#
# conf:  List of pairs (reader, writer)
#        Since it is natural to have same specifications for readers/writers
#        it is encouraged to use specs.
#
#        A reader/writer must have a type.
#        A reader/writer may present an interval (in seconds) property.
#        If a writer has a key 'async' it will be called whenever a
#        message is read.
#
#


specs:
  lognitdb:
    type: db 
    database: lognit 
    host: localhost
    user: root
    passwd: '' 
    connection: 'mysql+mysqldb://%s:%s@%s/%s' 

  activemq:
    type: activemq
    host: localhost
    port: 61613
    destination: '/queue/events'
    async: True

  log:
    type: log
    delimiter: '\t'

conf:
- reader:
    spec: lognitdb
    interval: 5
    query: select display_name, email from web_user
    columns: [display_name, email]
  writer: 
    spec: activemq

- reader:
    spec: log
    log_path: '/tmp/test.log'
  writer:
    spec: activemq
    blockable: True
    retry_interval: 5
